<?xml version="1.0" encoding="UTF-8"?>
<svg width="640" height="360" viewBox="0 0 640 360" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="{{ .Title }} thumbnail">
  {{/* Brand params with safe fallbacks */}}
  {{ $gStart := or .Site.Params.gradientStart "#7c3aed" }}
  {{ $gEnd := or .Site.Params.gradientEnd "#0ea5e9" }}
  {{ $titleColor := or .Site.Params.titleColor "#ffffff" }}
  {{ $subtitleColor := or .Site.Params.subtitleColor "#e2e8f0" }}
  {{/* Adaptive title size by title length to prevent clipping */}}
  {{ $tlen := len .Title }}
  {{ $tSize := 34 }}
  {{ if gt $tlen 45 }}{{ $tSize = 22 }}{{ else if gt $tlen 35 }}{{ $tSize = 26 }}{{ else if gt $tlen 28 }}{{ $tSize = 30 }}{{ end }}
  {{ $titleSize := printf "%d" $tSize }}
  {{ $subtitleSize := or .Site.Params.thumbSubtitleSize "16" }}
  {{ $titleY := or .Site.Params.thumbTitleY "192" }}
  {{ $subtitleY := or .Site.Params.thumbSubtitleY "230" }}

  <defs>
    <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="{{ $gStart }}" />
      <stop offset="100%" stop-color="{{ $gEnd }}" />
    </linearGradient>
  </defs>
  <rect width="640" height="360" fill="url(#g)"/>
  <rect x="16" y="16" width="608" height="328" rx="14" ry="14" fill="rgba(0,0,0,0.18)" />

  <text x="32" y="{{ $titleY }}" font-family="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Noto Sans KR', 'Apple SD Gothic Neo', 'Malgun Gothic', Arial, sans-serif" font-size="{{ $titleSize }}" font-weight="800" fill="{{ $titleColor }}" letter-spacing="-0.5px" textLength="576" lengthAdjust="spacing">
    {{ .Title }}
  </text>
  <text x="32" y="{{ $subtitleY }}" font-family="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Noto Sans KR', 'Apple SD Gothic Neo', 'Malgun Gothic', Arial, sans-serif" font-size="{{ $subtitleSize }}" font-weight="600" fill="{{ $subtitleColor }}">
    {{ or .Site.Params.brand "Dev Note by sw'Lee" }}
  </text>
</svg>
