<!doctype html><html lang=ko><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Case Study: make-snmprec — 현실적인 SNMP 시뮬레이션 데이터 만들기 | Dev Note by sw'Lee</title><meta name=description content="SNMP 기반 시뮬레이션 데이터(.snmprec)를 안정적으로 생성하기 위한 설계/구현 기록과 의사결정 근거를 공유합니다."><link rel=canonical href=https://swlee3306.github.io/sulee_portfolio/blog/make-snmprec-case-study/><meta name=theme-color content="#111111"><link rel=icon href=../../favicon.svg type=image/svg+xml><link rel=apple-touch-icon href=../../favicon.svg><meta name=author content="이상욱"><link rel=dns-prefetch href=//img.shields.io><link rel=preconnect href=https://img.shields.io crossorigin><meta property="og:type" content="article"><meta property="og:url" content="https://swlee3306.github.io/sulee_portfolio/blog/make-snmprec-case-study/"><meta property="og:title" content="Case Study: make-snmprec — 현실적인 SNMP 시뮬레이션 데이터 만들기 | Dev Note by sw'Lee"><meta property="og:description" content="SNMP 기반 시뮬레이션 데이터(.snmprec)를 안정적으로 생성하기 위한 설계/구현 기록과 의사결정 근거를 공유합니다."><meta property="og:image" content="https://swlee3306.github.io/images/sample-thumb.svg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Case Study: make-snmprec — 현실적인 SNMP 시뮬레이션 데이터 만들기 | Dev Note by sw'Lee"><meta name=twitter:description content="SNMP 기반 시뮬레이션 데이터(.snmprec)를 안정적으로 생성하기 위한 설계/구현 기록과 의사결정 근거를 공유합니다."><meta name=twitter:image content="https://swlee3306.github.io/images/sample-thumb.svg"><link rel=preload as=style href="../../css/styles.css?v=1758678164"><link rel=stylesheet href="../../css/styles.css?v=1758678164"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Person","name":"이상욱","url":"https:\/\/swlee3306.github.io\/sulee_portfolio\/","sameAs":[]}</script></head><body><a href=#main-content class=skip-link style=position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden>본문으로 건너뛰기</a><header class=site-header><div class="container nav"><a class=brand href=../../>Dev Note by sw'Lee</a><nav><ul><li><a href=../../>Home</a></li><li><a href=../../projects/>Projects</a></li><li><a href=../../blog/>Blog</a></li><li><a href=../../tags/>Tags</a></li><li><a href=../../about/>About</a></li><li><a href=../../contact/>Contact</a></li></ul></nav></div></header><main id=main-content role=main class=container><article class=article><img class=cover src=../../images/sample-thumb.svg alt="Case Study: make-snmprec — 현실적인 SNMP 시뮬레이션 데이터 만들기 cover" loading=lazy decoding=async width=1200 height=675 sizes="(max-width: 1200px) 100vw, 1200px"><h1>Case Study: make-snmprec — 현실적인 SNMP 시뮬레이션 데이터 만들기</h1><p class=meta>2025-09-19</p><ul class=tags><li>Go</li><li>SNMP</li><li>observability</li><li>testing</li></ul><div class=content><h2 id=tldr>TL;DR</h2><ul><li>실환경에 가까운 SNMP 데이터를 재현할 수 있는 <code>.snmprec</code> 생성 도구를 만들었습니다.</li><li>데이터 모델·엣지 케이스·검증 로직·CLI UX를 단단히 하여 반복 재현성과 신뢰성을 확보했습니다.</li><li>결과적으로 테스트 효율이 올라가고, 장애 재현 속도가 단축되었습니다. 관련 프로젝트: /projects/make-snmprec/</li></ul><h2 id=context>Context</h2><p>운영 환경에서 SNMP 기반 시스템을 테스트할 때, 현실적인 샘플 데이터가 부족하면 검증이 취약해집니다. 특정 장비/벤더에 특화된 MIB/OID, 불규칙한 값 분포, 엣지 케이스(누락/형 불일치 등)를 아우르는 시뮬레이션 데이터가 필요했습니다.</p><h2 id=problem>Problem</h2><ul><li>신뢰 가능한 <code>.snmprec</code>를 일관되게 생성하기 어렵다</li><li>장치/벤더별 MIB/OID 차이와 자료 결손</li><li>잘못된 값/형/범위를 초기에 잡아내지 못해 추적 비용 증가</li></ul><h2 id=approach>Approach</h2><p>Go 기반 CLI로 입력→정규화→검증→출력 파이프라인을 만들었습니다.</p><ul><li>단순성: 단일 바이너리/명령으로 실행</li><li>재현성: 동일 입력에 대해 동일 출력 보장</li><li>관측성: 구조화 로깅과 에러 메시지 표준화</li></ul><h2 id=data-model>Data Model</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>record := {
</span></span><span style=display:flex><span>  oid: string     // 예: 1.3.6.1.2.1.1.1.0
</span></span><span style=display:flex><span>  type: string    // 예: OctetString, Integer, Gauge32
</span></span><span style=display:flex><span>  value: string   // 예: &#34;Linux x86_64 ...&#34;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>입력 스키마는 CSV/JSON 모두를 지원하도록 설계할 수 있습니다. 핵심은 OID/타입/값의 일관성과 유효 범위를 사전에 강제하는 것입니다.</p><p>예시 입력(CSV):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csv data-lang=csv><span style=display:flex><span><span style=color:#e6db74>oid</span>,<span style=color:#e6db74>type</span>,<span style=color:#e6db74>value</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>1.3.6.1.2.1.1.1.0</span>,<span style=color:#e6db74>OctetString</span>,<span style=color:#e6db74>&#34;Linux x86_64 (5.10)&#34;</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>1.3.6.1.2.1.25.3.3.1.2.0</span>,<span style=color:#e6db74>Integer</span>,<span style=color:#e6db74>7</span>
</span></span></code></pre></div><p>예시 출력(.snmprec 스니펫):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>.1.3.6.1.2.1.1.1.0|4|Linux x86_64 (5.10)
</span></span><span style=display:flex><span>.1.3.6.1.2.1.25.3.3.1.2.0|2|7
</span></span></code></pre></div><h2 id=edge-cases>Edge Cases</h2><ul><li>잘못된 OID 포맷: 정규표현식 및 파서로 선제 차단</li><li>타입 불일치: 타입 테이블(Integer=2, OctetString=4 등)과 값 파싱 검증</li><li>범위 초과/누락 값: 기본값/보정 규칙 제공, 정책(무시/경고/실패) 선택 가능</li></ul><h2 id=validation>Validation</h2><ul><li>입력 스키마 검증: 필수 필드/형식</li><li>샘플 검증: 변환된 레코드 수/타입 분포/특정 OID 존재 여부 체크</li><li>스모크 테스트: 최소 샘플로 end-to-end 생성/검증 CI 가능성 열어두기</li></ul><h2 id=cli-ux>CLI UX</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>make-snmprec <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --input input.csv <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --output out.snmprec <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --on-error fail   <span style=color:#75715e># ignore|warn|fail</span>
</span></span></code></pre></div><ul><li>에러 메시지 예: <code>invalid OID at line 12: 1.3.6..1</code> (문맥 제공)</li><li>구조화 로그(JSON) 옵션으로 파이프라인 결합 용이</li></ul><h2 id=results>Results</h2><ul><li>재현성: 동일 입력 → 동일 출력 보장</li><li>생산성: 시뮬레이션 데이터 작성/수정/검증이 CLI로 일원화</li><li>품질: 엣지 케이스 사전 차단으로 문제 재현/진단 속도 향상</li></ul><h2 id=further-work>Further Work</h2><ul><li>MIB 기반 타입 유추/보조 검증</li><li>표본 분포 기반의 값 생성(현실성 향상)</li><li>프로필(벤더/장치군) 프리셋</li></ul><p>관련 프로젝트 자세히 보기: /projects/make-snmprec/</p></div><nav class=pagination aria-label="이전/다음 글" style=margin-top:24px;gap:12px;display:flex;justify-content:space-between><div><a class=btn href=../../blog/introducing-blog/ aria-label="이전 글: 블로그를 시작합니다">← 블로그를 시작합니다</a></div><div></div></nav></article></main><footer class=site-footer><div class=container><p>© 2025 이상욱</p></div></footer></body></html>